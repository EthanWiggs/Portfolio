function updateCounters(){PICKERS.forEach((t=>{const e=document.getElementById(`count-${t.id}`);e&&("c4"===t.id?e.textContent=String(calculateUsedPortsForC4Model()):"c3"===t.id?e.textContent=String(getC3CurrentUnits()):e.textContent=String(state[t.id].length))})),updateTotalCost()}function updateTotalCost(){let t=0;PICKERS.forEach((e=>{const n=e.palette||[];state[e.id].forEach((o=>{const a=findPaletteEntryByPartID(n,o);if(!a)return;let l=1;e.allowQuantity&&state[e.id+"_qty"]&&(l="number"==typeof state[e.id+"_qty"][o]?state[e.id+"_qty"][o]:1),t+=(a.cost||0)*l}))}));const e=document.getElementById("total-cost");e&&(e.textContent=`Total Cost: Â£${t}`),updateDownloadButtonState()}function updateDownloadButtonState(){if(!downloadBtn)return;const t=calculateUsedPortsForC4Model(),e=getTotalPorts(),n=productDiv&&productDiv.querySelectorAll("p").length>0,o=t>e||!n||!state.disclaimerAgreed;downloadBtn.disabled=o,downloadBtn.style.pointerEvents=o?"none":"",downloadBtn.style.opacity=o?"0.45":"",mailBtn&&(mailBtn.style.pointerEvents=o?"none":"",mailBtn.style.opacity=o?"0.45":"")}